# StepMotor_MicroStepDriver

這是一個練習用 STM32 的定時器輸出 PWM 訊號給 A4988 細分步進驅動器來控制步進馬達的程式。改變 PWM 的頻率來控制馬達的角速度 ( 單位：deg/sec )，並利用定時器在輸出 PWM 時的每一個週期產生的中斷來記錄馬達目前走了多少步，以此實現馬達的角度控制 ( 單位：deg )。

使用前先確認定時器的頻率是多少和要使用多少的驅動分辨率，需先在標頭檔 A4988_Driver.h 中修改。程式中設置了一個 GPIO 中斷在開發板上的藍色按鈕，當作啟動馬達的開關，按下按鈕後就會呼叫馬達控制函數 StepMotor_Control，會根據所選擇的分辨率、角速度和角度來驅動步進馬達。

此程式設置馬達的角速度範圍約為 1.71~1081.73 deg/sec。

* 硬體

  STM32F446RE Nucleo-64

  A4988 細分步進驅動器 - 最大輸出電流設置為 0.75A

  四線二相 42步進馬達

  2S Lipo 電池

* 未來
  1. 新增梯形加減速模式



